const c="my-extension-host";let o=document.getElementById(c);o||(o=document.createElement("div"),o.id=c,o.style.position="fixed",o.style.top="10px",o.style.right="10px",o.style.zIndex="10000",document.body.appendChild(o));const r=o.shadowRoot||o.attachShadow({mode:"open"}),i="my-root";let s=r.querySelector(`#${i}`);s||(s=document.createElement("div"),s.id=i,s.className="my-extension-root",r.appendChild(s));if(!r.querySelector("link[href*='main.css']")){const e=document.createElement("link");e.rel="stylesheet",e.href=chrome.runtime.getURL("styles/main.css"),console.log(chrome.runtime.getURL("styles/main.css")),r.appendChild(e)}window.addEventListener("message",function(e){console.log("Message from content script:",e),e.source===window&&(!e.data||chrome.runtime.sendMessage(e.data,function(n){console.log("Background script responded:",n)}))});console.log("Content script loaded");(async()=>{try{console.log("Substack detected. Time to grab cookies like a raccoon in a dumpster."),await new Promise((e,n)=>{chrome.runtime.sendMessage({type:"API_REQUEST",action:"setSubstackCookies"},t=>{if(console.log("Response from setSubstackCookies:",t),chrome.runtime.lastError){console.error("Error from setSubstackCookies:",chrome.runtime.lastError),n(chrome.runtime.lastError.message);return}t!=null&&t.success?e(t.data.result):n((t==null?void 0:t.error)||"Failed to get cookies")})}),console.log("Cookies sent to WriteStack successfully")}catch(e){console.error("Something went sideways:",e)}})();
//# sourceMappingURL=contentScript.js.map
